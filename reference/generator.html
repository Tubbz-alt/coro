<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a generator function — generator • flowery</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a generator function — generator" />
<meta property="og:description" content="generator() creates a factory function for generators. A
generator is an iterator function that can pause its
execution with yield() and resume from where it left off. Because
they manage state for you, generators are the easiest way to create
iterators. The following rules apply:
Yielded values do not terminate the generator. If you call the
generator again, the execution resumes right after the yielding
point. All local variables are preserved.
Returned values terminate the generator. If called again after a
return(), the generator keeps returning NULL.


Generators are compatible with all iterator features such as
iterate(), iter_adapt(), or drain()." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flowery</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/iteration.html">Iteration in R</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a generator function</h1>
    
    <div class="hidden name"><code>generator.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>generator()</code> creates a factory function for generators. A
generator is an <a href='iterator.html'>iterator function</a> that can pause its
execution with <code><a href='yield.html'>yield()</a></code> and resume from where it left off. Because
they manage state for you, generators are the easiest way to create
iterators. The following rules apply:</p><ul>
<li><p>Yielded values do not terminate the generator. If you call the
generator again, the execution resumes right after the yielding
point. All local variables are preserved.</p></li>
<li><p>Returned values terminate the generator. If called again after a
<code><a href='https://rdrr.io/r/base/function.html'>return()</a></code>, the generator keeps returning <code>NULL</code>.</p></li>
</ul>

<p>Generators are compatible with all iterator features such as
<code><a href='iterate.html'>iterate()</a></code>, <code><a href='iter_adapt.html'>iter_adapt()</a></code>, or <code><a href='take.html'>drain()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>generator</span><span class='op'>(</span><span class='va'>fn</span><span class='op'>)</span>

<span class='fu'>gen</span><span class='op'>(</span><span class='va'>expr</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fn</th>
      <td><p>A function of zero or one argument to be transformed into
a generator function that can <code><a href='yield.html'>yield()</a></code> and <code><a href='https://rdrr.io/r/base/function.html'>return()</a></code> values.
Within a generator, <code>for</code> loops have <a href='iterator.html'>iterator</a> support.</p></td>
    </tr>
    <tr>
      <th>expr</th>
      <td><p>A yielding expression.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="passing-arguments-to-a-generator"><a class="anchor" href="#passing-arguments-to-a-generator"></a>Passing arguments to a generator</h2>

    


<p>You can create generator functions that take one argument. The
first time the generator is called, the argument is defined in the
suspendable function. On subsequent invokations, the argument is
returned from <code><a href='yield.html'>yield()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># A generator statement creates a generator constructor:</span>
<span class='va'>new_gen</span> <span class='op'>&lt;-</span> <span class='fu'>generator</span><span class='op'>(</span><span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='yield.html'>yield</a></span><span class='op'>(</span><span class='st'>"foo"</span><span class='op'>)</span>
  <span class='fu'><a href='yield.html'>yield</a></span><span class='op'>(</span><span class='st'>"bar"</span><span class='op'>)</span>
  <span class='st'>"baz"</span>
<span class='op'>}</span><span class='op'>)</span>

<span class='co'># The constructor creates generator functions. They are essentially</span>
<span class='co'># iterators that you can call successively to obtain values from:</span>
<span class='va'>iter</span> <span class='op'>&lt;-</span> <span class='fu'>new_gen</span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'>iter</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "foo"</div><div class='input'><span class='fu'>iter</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "bar"</div><div class='input'>
<span class='co'># Once a generator has returned it keeps returning `NULL`. This</span>
<span class='co'># signals to its caller that new values can no longer be</span>
<span class='co'># produced. The generator is exhausted:</span>
<span class='fu'>iter</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "baz"</div><div class='input'><span class='fu'>iter</span><span class='op'>(</span><span class='op'>)</span>


<span class='co'># You can only exhaust a generator once but you can always create</span>
<span class='co'># new ones from a factory:</span>
<span class='va'>iter</span> <span class='op'>&lt;-</span> <span class='fu'>new_gen</span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'>iter</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "foo"</div><div class='input'>
<span class='co'># As generators are regular iterators, you can use all iterator</span>
<span class='co'># tools such as iterate() which allows you to loop over all values</span>
<span class='co'># with a `for` loop:</span>
<span class='fu'><a href='iterate.html'>iterate</a></span><span class='op'>(</span><span class='kw'>for</span> <span class='op'>(</span><span class='va'>x</span> <span class='kw'>in</span> <span class='va'>iter</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"\n"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; bar 
#&gt; baz </div><div class='input'>

<span class='co'># flowery provides a short syntax `gen()` for creating one-off</span>
<span class='co'># generator functions. It is handy to chain iterators:</span>
<span class='va'>numbers</span> <span class='op'>&lt;-</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>
<span class='va'>odds</span> <span class='op'>&lt;-</span> <span class='fu'>gen</span><span class='op'>(</span><span class='kw'>for</span> <span class='op'>(</span><span class='va'>x</span> <span class='kw'>in</span> <span class='va'>numbers</span><span class='op'>)</span> <span class='kw'>if</span> <span class='op'>(</span><span class='va'>x</span> <span class='op'>%%</span> <span class='fl'>2</span> <span class='op'>!=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='fu'><a href='yield.html'>yield</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>squares</span> <span class='op'>&lt;-</span> <span class='fu'>gen</span><span class='op'>(</span><span class='kw'>for</span> <span class='op'>(</span><span class='va'>x</span> <span class='kw'>in</span> <span class='va'>odds</span><span class='op'>)</span> <span class='fu'><a href='yield.html'>yield</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>greetings</span> <span class='op'>&lt;-</span> <span class='fu'>gen</span><span class='op'>(</span><span class='kw'>for</span> <span class='op'>(</span><span class='va'>x</span> <span class='kw'>in</span> <span class='va'>squares</span><span class='op'>)</span> <span class='fu'><a href='yield.html'>yield</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Hey"</span>, <span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># As with all iterators, you can take() elements from a generator:</span>
<span class='fu'><a href='take.html'>take</a></span><span class='op'>(</span><span class='va'>greetings</span>, <span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "Hey 1"
#&gt; 
#&gt; [[2]]
#&gt; [1] "Hey 9"
#&gt; </div><div class='input'>
<span class='co'># Or drain the remaining elements:</span>
<span class='fu'><a href='take.html'>drain</a></span><span class='op'>(</span><span class='va'>greetings</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "Hey 25"
#&gt; 
#&gt; [[2]]
#&gt; [1] "Hey 49"
#&gt; 
#&gt; [[3]]
#&gt; [1] "Hey 81"
#&gt; </div><div class='input'>

<span class='co'># You can supply arguments to generator functions. They are</span>
<span class='co'># returned from `yield()`.</span>
<span class='va'>new_tally</span> <span class='op'>&lt;-</span> <span class='fu'>generator</span><span class='op'>(</span><span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>count</span> <span class='op'>&lt;-</span> <span class='fl'>0</span>
  <span class='kw'>while</span> <span class='op'>(</span><span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>i</span> <span class='op'>&lt;-</span> <span class='fu'><a href='yield.html'>yield</a></span><span class='op'>(</span><span class='va'>count</span><span class='op'>)</span>
    <span class='va'>count</span> <span class='op'>&lt;-</span> <span class='va'>count</span> <span class='op'>+</span> <span class='va'>i</span>
  <span class='op'>}</span>
<span class='op'>}</span><span class='op'>)</span>
<span class='va'>tally</span> <span class='op'>&lt;-</span> <span class='fu'>new_tally</span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'>tally</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 0</div><div class='input'><span class='fu'>tally</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 2</div><div class='input'><span class='fu'>tally</span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 12</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


